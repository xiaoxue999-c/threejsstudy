{"id":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","dependencies":[{"name":"C:\\Users\\ADMINWWQ\\Desktop\\threejs\\01-three_basic\\package.json","includedInParent":true,"mtime":1713938217714},{"name":"C:\\Users\\ADMINWWQ\\Desktop\\threejs\\01-three_basic\\node_modules\\three\\package.json","includedInParent":true,"mtime":1713854592536},{"name":"three","loc":{"line":5,"column":7,"index":55},"parent":"C:\\Users\\ADMINWWQ\\Desktop\\threejs\\01-three_basic\\node_modules\\three\\examples\\jsm\\shaders\\VelocityShader.js","resolved":"C:\\Users\\ADMINWWQ\\Desktop\\threejs\\01-three_basic\\node_modules\\three\\build\\three.module.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VelocityShader = void 0;\nvar _three = require(\"three\");\n/**\n * Mesh Velocity Shader @bhouston\n */\n\nvar VelocityShader = exports.VelocityShader = {\n  name: 'VelocityShader',\n  uniforms: _three.UniformsUtils.merge([_three.UniformsLib.common, _three.UniformsLib.displacementmap, {\n    modelMatrixPrev: {\n      value: new _three.Matrix4()\n    },\n    currentProjectionViewMatrix: {\n      value: new _three.Matrix4()\n    },\n    previousProjectionViewMatrix: {\n      value: new _three.Matrix4()\n    }\n  }]),\n  vertexShader: /* glsl */\"\\n#define NORMAL\\n\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\n\\tvarying vec3 vViewPosition;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nuniform mat4 previousProjectionViewMatrix;\\nuniform mat4 currentProjectionViewMatrix;\\n\\nuniform mat4 modelMatrixPrev;\\n\\nvarying vec4 clipPositionCurrent;\\nvarying vec4 clipPositionPrevious;\\n\\nvoid main() {\\n\\n\\n\\t#include <uv_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\n#ifdef USE_SKINNING\\n\\n\\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\tclipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * skinned;\\n\\tclipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * skinned;\\n\\n#else\\n\\n\\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\tclipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * vec4( transformed, 1.0 );\\n\\tclipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * vec4( transformed, 1.0 );\\n\\n#endif\\n\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\",\n  fragmentShader: /* glsl */\"\\n#define NORMAL\\n\\nuniform float opacity;\\n\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvarying vec4 clipPositionCurrent;\\nvarying vec4 clipPositionPrevious;\\n\\nvoid main() {\\n\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\tdiffuseColor.a = opacity;\\n\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\n\\tvec2 ndcPositionCurrent  = clipPositionCurrent.xy/clipPositionCurrent.w;\\n\\tvec2 ndcPositionPrevious = clipPositionPrevious.xy/clipPositionPrevious.w;\\n\\tvec2 vel = ( ndcPositionCurrent - ndcPositionPrevious ) * 0.5;\\n\\tvel = vel * 0.5 + 0.5;\\n\\tvec2 v1 = packDepthToRG(vel.x);\\n\\tvec2 v2 = packDepthToRG(vel.y);\\n\\tgl_FragColor = vec4(v1.x, v1.y, v2.x, v2.y);\\n\\n\\t#include <logdepthbuf_fragment>\\n\\n}\\n\\n\"\n};"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":7,"column":0},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":1,"column":0}},{"generated":{"line":7,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":1,"column":0},"name":"_three"},{"generated":{"line":7,"column":10},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":1,"column":0}},{"generated":{"line":7,"column":13},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":1,"column":0},"name":"require"},{"generated":{"line":7,"column":20},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":1,"column":0}},{"generated":{"line":8,"column":0},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":7,"column":0}},{"generated":{"line":9,"column":0},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":8,"column":0}},{"generated":{"line":10,"column":0},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":9,"column":0}},{"generated":{"line":12,"column":0},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":0}},{"generated":{"line":12,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":6},"name":"VelocityShader"},{"generated":{"line":12,"column":18},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":20}},{"generated":{"line":12,"column":21},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":20},"name":"exports"},{"generated":{"line":12,"column":28},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":20}},{"generated":{"line":12,"column":29},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":20},"name":"VelocityShader"},{"generated":{"line":12,"column":43},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":20}},{"generated":{"line":12,"column":46},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":11,"column":23}},{"generated":{"line":13,"column":2},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":13,"column":1},"name":"name"},{"generated":{"line":13,"column":6},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":13,"column":5}},{"generated":{"line":13,"column":8},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":13,"column":7}},{"generated":{"line":13,"column":24},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":13,"column":23}},{"generated":{"line":14,"column":2},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":1},"name":"uniforms"},{"generated":{"line":14,"column":10},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":9}},{"generated":{"line":14,"column":12},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":11},"name":"UniformsUtils"},{"generated":{"line":14,"column":32},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":24}},{"generated":{"line":14,"column":33},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":25},"name":"merge"},{"generated":{"line":14,"column":38},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":30}},{"generated":{"line":14,"column":39},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":15,"column":32}},{"generated":{"line":14,"column":40},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":16,"column":2},"name":"UniformsLib"},{"generated":{"line":14,"column":58},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":16,"column":13}},{"generated":{"line":14,"column":59},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":16,"column":14},"name":"common"},{"generated":{"line":14,"column":65},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":16,"column":20}},{"generated":{"line":14,"column":67},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":17,"column":2},"name":"UniformsLib"},{"generated":{"line":14,"column":85},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":17,"column":13}},{"generated":{"line":14,"column":86},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":17,"column":14},"name":"displacementmap"},{"generated":{"line":14,"column":101},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":17,"column":29}},{"generated":{"line":14,"column":103},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":18,"column":2}},{"generated":{"line":15,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":3},"name":"modelMatrixPrev"},{"generated":{"line":15,"column":19},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":18}},{"generated":{"line":15,"column":21},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":20}},{"generated":{"line":16,"column":6},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":22},"name":"value"},{"generated":{"line":16,"column":11},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":27}},{"generated":{"line":16,"column":13},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":29}},{"generated":{"line":16,"column":17},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":33},"name":"Matrix4"},{"generated":{"line":16,"column":31},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":40}},{"generated":{"line":16,"column":32},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":41}},{"generated":{"line":17,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":43}},{"generated":{"line":17,"column":5},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":19,"column":44}},{"generated":{"line":18,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":3},"name":"currentProjectionViewMatrix"},{"generated":{"line":18,"column":31},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":30}},{"generated":{"line":18,"column":33},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":32}},{"generated":{"line":19,"column":6},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":34},"name":"value"},{"generated":{"line":19,"column":11},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":39}},{"generated":{"line":19,"column":13},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":41}},{"generated":{"line":19,"column":17},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":45},"name":"Matrix4"},{"generated":{"line":19,"column":31},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":52}},{"generated":{"line":19,"column":32},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":53}},{"generated":{"line":20,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":55}},{"generated":{"line":20,"column":5},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":20,"column":56}},{"generated":{"line":21,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":3},"name":"previousProjectionViewMatrix"},{"generated":{"line":21,"column":32},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":31}},{"generated":{"line":21,"column":34},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":33}},{"generated":{"line":22,"column":6},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":35},"name":"value"},{"generated":{"line":22,"column":11},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":40}},{"generated":{"line":22,"column":13},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":42}},{"generated":{"line":22,"column":17},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":46},"name":"Matrix4"},{"generated":{"line":22,"column":31},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":53}},{"generated":{"line":22,"column":32},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":54}},{"generated":{"line":23,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":21,"column":56}},{"generated":{"line":24,"column":2},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":22,"column":2}},{"generated":{"line":24,"column":3},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":22,"column":3}},{"generated":{"line":24,"column":4},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":23,"column":3}},{"generated":{"line":24,"column":5},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":23,"column":4}},{"generated":{"line":25,"column":2},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":25,"column":1},"name":"vertexShader"},{"generated":{"line":25,"column":14},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":25,"column":13}},{"generated":{"line":25,"column":16},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":25,"column":15}},{"generated":{"line":25,"column":1709},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":89,"column":1}},{"generated":{"line":26,"column":2},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":90,"column":1},"name":"fragmentShader"},{"generated":{"line":26,"column":16},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":90,"column":15}},{"generated":{"line":26,"column":18},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":90,"column":17}},{"generated":{"line":27,"column":0},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":128,"column":0}},{"generated":{"line":27,"column":1},"source":"../node_modules/three/examples/jsm/shaders/VelocityShader.js","original":{"line":128,"column":1}}],"sources":{"../node_modules/three/examples/jsm/shaders/VelocityShader.js":"import {\n\tUniformsLib,\n\tUniformsUtils,\n\tMatrix4\n} from 'three';\n\n/**\n * Mesh Velocity Shader @bhouston\n */\n\nconst VelocityShader = {\n\n\tname: 'VelocityShader',\n\n\tuniforms: UniformsUtils.merge( [\n\t\tUniformsLib.common,\n\t\tUniformsLib.displacementmap,\n\t\t{\n\t\t\tmodelMatrixPrev: { value: new Matrix4() },\n\t\t\tcurrentProjectionViewMatrix: { value: new Matrix4() },\n\t\t\tpreviousProjectionViewMatrix: { value: new Matrix4() }\n\t\t}\n\t] ),\n\n\tvertexShader: /* glsl */`\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nuniform mat4 previousProjectionViewMatrix;\nuniform mat4 currentProjectionViewMatrix;\n\nuniform mat4 modelMatrixPrev;\n\nvarying vec4 clipPositionCurrent;\nvarying vec4 clipPositionPrevious;\n\nvoid main() {\n\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\n#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\tclipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * skinned;\n\tclipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\tclipPositionCurrent  = currentProjectionViewMatrix * modelMatrix * vec4( transformed, 1.0 );\n\tclipPositionPrevious = previousProjectionViewMatrix * modelMatrixPrev * vec4( transformed, 1.0 );\n\n#endif\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n`,\n\tfragmentShader: /* glsl */`\n#define NORMAL\n\nuniform float opacity;\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec4 clipPositionCurrent;\nvarying vec4 clipPositionPrevious;\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\tdiffuseColor.a = opacity;\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tvec2 ndcPositionCurrent  = clipPositionCurrent.xy/clipPositionCurrent.w;\n\tvec2 ndcPositionPrevious = clipPositionPrevious.xy/clipPositionPrevious.w;\n\tvec2 vel = ( ndcPositionCurrent - ndcPositionPrevious ) * 0.5;\n\tvel = vel * 0.5 + 0.5;\n\tvec2 v1 = packDepthToRG(vel.x);\n\tvec2 v2 = packDepthToRG(vel.y);\n\tgl_FragColor = vec4(v1.x, v1.y, v2.x, v2.y);\n\n\t#include <logdepthbuf_fragment>\n\n}\n\n`\n};\n\nexport { VelocityShader };\n"},"lineCount":null}},"error":null,"hash":"509fc41b3603f0238bd0339ea7f7cd34","cacheData":{"env":{}}}